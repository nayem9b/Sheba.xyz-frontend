(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9094],{14961:function(e,t,n){Promise.resolve().then(n.bind(n,25024))},25024:function(e,t,n){"use strict";n.r(t);var r=n(57437),a=n(84460),s=n(75620),o=n(88110),i=n.n(o),l=n(33116),u=n(61396),c=n.n(u),d=n(24033),h=n(2265),g=n(92608),f=n(32207),v=n(74499),p=n(54509);t.default=()=>{let{session:e}=(0,v.kP)(),t=(0,p.Y)(e),{isSignedIn:n,user:o}=(0,v.aF)(),[u]=(0,s.I1)();(0,d.useRouter)();let{organizationList:m,isLoaded:x,setActive:y}=(0,v.eW)(),[S,b]=(0,h.useState)(1),[j,k]=(0,h.useState)(10),[U,C]=(0,h.useState)(""),[E,P]=(0,h.useState)(""),[w,T]=(0,h.useState)(""),[z,I]=(0,h.useState)(""),[Z,q]=(0,h.useState)(""),[N,O]=(0,h.useState)(""),{data:R,isLoading:_}=(0,s.RB)({refetchOnMountOrArgChange:!0,pollingInterval:1e4}),M=null==R?void 0:R.meta;console.log(N);let deleteHandler=async e=>{l.ZP.loading("Deleting....."),fetch("http://localhost:3333/api/v1/users/db/".concat(e)).then(e=>e.json()).then(e=>{var t;console.log(null==e?void 0:e.data),O(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.userId)});try{fetch("http://localhost:3333/api/v1/users/".concat(N),{method:"DELETE"}).then(e=>e.json()).then(e=>{console.log(e),window.location.reload(),l.ZP.success("User Deleted Successfully")})}catch(e){l.ZP.error(e.message)}},D=[{title:"Name",dataIndex:"name"},{title:"Email",dataIndex:"email"},{title:"Role",dataIndex:"role"},{title:"Action",render:function(e){return(0,r.jsx)(r.Fragment,{children:"admin"===t&&(0,r.jsxs)("div",{children:[(0,r.jsx)(c(),{href:"/allusers/edit/".concat(null==e?void 0:e.id),children:(0,r.jsx)(i(),{style:{margin:"0px 5px"},onClick:()=>console.log(e),type:"primary",children:(0,r.jsx)(f.Z,{})})}),(0,r.jsx)(i(),{onClick:()=>deleteHandler(null==e?void 0:e.id),type:"primary",danger:!0,children:(0,r.jsx)(g.Z,{})})]})})}}];return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-center text-blue-500",children:"Manage Users"}),(0,r.jsx)("div",{className:"mx-5",children:(0,r.jsx)(a.Z,{loading:_,columns:D,dataSource:null==R?void 0:R.data,pageSize:j,totalPages:null==M?void 0:M.total,showSizeChanger:!0,onPaginationChange:(e,t)=>{console.log("Page:",e,"PageSize:",t),b(e),k(t)},onTableChange:(e,t,n)=>{let{order:r,field:a}=n;C(a),P("ascend"===r?"asc":"desc")},showPagination:!0})})]})}},84460:function(e,t,n){"use strict";var r=n(57437),a=n(68939);t.Z=e=>{let{loading:t=!1,columns:n,dataSource:s,pageSize:o,totalPages:i,showSizeChanger:l=!0,onPaginationChange:u,onTableChange:c,showPagination:d=!0}=e;return(0,r.jsx)(a.Z,{loading:t,columns:n,dataSource:s,pagination:!!d&&{pageSize:o,total:i,pageSizeOptions:[5,10,20],showSizeChanger:l,onChange:u},onChange:c})}},93779:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var r=n(38324),a=n(52967),s=n(18308);let o=(0,r.LC)({reducerPath:"api",baseQuery:(0,a.ni)({baseUrl:"http://localhost:3333/api/v1"}),endpoints:()=>({}),tagTypes:s.$})},75620:function(e,t,n){"use strict";n.d(t,{I1:function(){return u},RB:function(){return l},Vx:function(){return i}});var r=n(93779),a=n(18308);let s=r.u.injectEndpoints({endpoints:e=>({getUserById:e.query({query:e=>({url:"/users/".concat(e),method:"GET"}),providesTags:[a.U.user]}),addUser:e.mutation({query:e=>({url:"/auth/signup",method:"POST",data:e}),invalidatesTags:[a.U.user]}),deleteUser:e.mutation({query:e=>({url:"/users/".concat(e),method:"DELETE"}),invalidatesTags:[a.U.user]}),allUsers:e.query({query:()=>({url:"/users",method:"GET"}),invalidatesTags:[a.U.user]})})}),{useGetUserByIdQuery:o,useAddUserMutation:i,useAllUsersQuery:l,useDeleteUserMutation:u}=s},18308:function(e,t,n){"use strict";var r,a;n.d(t,{$:function(){return s},U:function(){return r}}),(a=r||(r={})).service="service",a.category="category",a.booking="booking",a.reviews="reviews",a.cart="cart",a.feedback="feedback",a.user="user",a.content="content";let s=["service","category","booking","reviews","cart","feedback","user","content"]},54509:function(e,t,n){"use strict";function checkUserRole(e){if(!e||!e.user||!e.user.organizationMemberships||0===e.user.organizationMemberships.length)return null;let t=e.user.organizationMemberships;for(let e of t)if(e.role)return e.role.toLowerCase();return null}n.d(t,{Y:function(){return checkUserRole}})},24033:function(e,t,n){e.exports=n(20290)}},function(e){e.O(0,[2458,8324,4092,3116,9559,4499,8110,1396,8610,1241,4447,6329,5623,600,3574,3673,2044,4159,15,2971,7864,1744],function(){return e(e.s=14961)}),_N_E=e.O()}]);